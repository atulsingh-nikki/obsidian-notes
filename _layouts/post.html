---
layout: default
---

<article class="blog-post">
  <header class="blog-post__header">
    <h1 class="blog-post__title">{{ page.title }}</h1>
    <p class="blog-post__meta">
      <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %-d, %Y" }}</time>
      {%- if page.author -%}
        · <span class="blog-post__author">{{ page.author }}</span>
      {%- endif -%}
      {%- if page.tags and page.tags.size > 0 -%}
        · <span class="blog-post__tags">{{ page.tags | join: ", " }}</span>
      {%- endif -%}
    </p>
  </header>

  <div class="blog-post__content">
    {{ content }}
  </div>

  {% assign related_count = 0 %}
  {% capture related_items %}
    {% if page.tags and page.tags.size > 0 %}
      {% for candidate in site.posts %}
        {% if candidate.url != page.url %}
          {% assign share = false %}
          {% for tag in candidate.tags %}
            {% if page.tags contains tag %}
              {% assign share = true %}
            {% endif %}
          {% endfor %}
          {% if share %}
            {% assign related_count = related_count | plus: 1 %}
            <li class="blog-post__related-item">
              <a class="blog-post__related-link" href="{{ candidate.url | relative_url }}">{{ candidate.title }}</a>
              <span class="blog-post__related-meta">
                {{ candidate.date | date: "%B %-d, %Y" }}
                {% if candidate.tags and candidate.tags.size > 0 %}
                  · {{ candidate.tags | join: ", " }}
                {% endif %}
              </span>
            </li>
          {% endif %}
          {% if related_count == 5 %}
            {% break %}
          {% endif %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endcapture %}
  {% if related_count == 0 %}
    {% assign fallback_count = 0 %}
    {% capture related_items %}
      {% for candidate in site.posts %}
        {% if candidate.url != page.url %}
          {% assign fallback_count = fallback_count | plus: 1 %}
          <li class="blog-post__related-item">
            <a class="blog-post__related-link" href="{{ candidate.url | relative_url }}">{{ candidate.title }}</a>
            <span class="blog-post__related-meta">
              {{ candidate.date | date: "%B %-d, %Y" }}
              {% if candidate.tags and candidate.tags.size > 0 %}
                · {{ candidate.tags | join: ", " }}
              {% endif %}
            </span>
          </li>
        {% endif %}
        {% if fallback_count == 5 %}
          {% break %}
        {% endif %}
      {% endfor %}
    {% endcapture %}
    {% assign related_count = fallback_count %}
  {% endif %}
  {% if related_count > 0 %}
    <section class="blog-post__related" aria-label="Related posts">
      <h2 class="blog-post__related-title">Keep Reading</h2>
      <ul class="blog-post__related-list">
        {{ related_items }}
      </ul>
    </section>
  {% endif %}

  <nav class="blog-post__nav" aria-label="Post navigation">
    <ul class="blog-post__nav-list">
      <li class="blog-post__nav-item">
        <a class="blog-post__nav-link blog-post__nav-link--home" href="{{ '/' | relative_url }}">
          ← Home
        </a>
      </li>
      <li class="blog-post__nav-item">
        <a class="blog-post__nav-link blog-post__nav-link--index" href="{{ '/blog/' | relative_url }}">
          Blog index
        </a>
      </li>
      {%- if page.previous -%}
        <li class="blog-post__nav-item">
          <a class="blog-post__nav-link blog-post__nav-link--prev" href="{{ page.previous.url | relative_url }}">
            ← Previous: {{ page.previous.title }}
          </a>
        </li>
      {%- endif -%}
      {%- if page.next -%}
        <li class="blog-post__nav-item">
          <a class="blog-post__nav-link blog-post__nav-link--next" href="{{ page.next.url | relative_url }}">
            Next: {{ page.next.title }} →
          </a>
        </li>
      {%- endif -%}
    </ul>
  </nav>
</article>
